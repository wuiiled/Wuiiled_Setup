# 全局设置
settings:
  output_dir: "output"      # 构建产物目录
  mihomo_bin: "mihomo"      # Mihomo 二进制路径
  dns_check: true           # 全局 DNS 检测开关 (仅对 type=reject 生效)
  concurrency: 600          # 并发数 (安全范围，防止被 Ban)
  # DNS 轮询池：混合使用国际大厂和国内 DNS，提高在 Github Actions 环境下的成功率
  dns_servers:
    - "8.8.8.8:53"        # Google
    - "1.1.1.1:53"        # Cloudflare
    - "208.67.222.222:53" # OpenDNS
    - "9.9.9.9:53"        # Quad9
    - "223.5.5.5:53"      # AliDNS (备用)

# 规则集合
rule_sets:
  # 1. 广告拦截 (ADS)
  - name: "ADs_merged"
    type: "reject"
    output_prefix: "+."
    targets: ["mihomo", "adguard", "mosdns"]
    sources:
      - "https://raw.githubusercontent.com/pmkol/easymosdns/rules/ad_domain_list.txt"
      - "https://raw.githubusercontent.com/wuiiled/Wuiiled_Setup/refs/heads/master/scripts/Reject-addon.txt"
      - "https://adguardteam.github.io/HostlistsRegistry/assets/filter_1.txt"
      - "https://adguardteam.github.io/HostlistsRegistry/assets/filter_3.txt"
      - "https://adguardteam.github.io/HostlistsRegistry/assets/filter_4.txt"
      - "https://raw.githubusercontent.com/ForestL18/rules-dat/mihomo/geo/classical/pcdn.list"
      - "https://raw.githubusercontent.com/ForestL18/rules-dat/refs/heads/mihomo/geo/classical/reject.list"
      - "https://a.dove.isdumb.one/pihole.txt"
      - "https://raw.githubusercontent.com/limbopro/Adblock4limbo/main/rule/Surge/Adblock4limbo_surge.list"
      - "https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules_domainset.txt"
      - "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/refs/heads/release/reject-list.txt"
      - "https://ruleset.skk.moe/Clash/domainset/reject.txt"
    allowlists:
      - "https://raw.githubusercontent.com/Cats-Team/AdRules/refs/heads/script/script/allowlist.txt"
      - "https://raw.githubusercontent.com/zoonderkins/blahdns/refs/heads/master/hosts/whitelist.txt"
      - "https://raw.githubusercontent.com/AdguardTeam/AdGuardSDNSFilter/master/Filters/exceptions.txt"
      - "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/refs/heads/hidden/reject-need-to-remove.txt"
    local_allowlists:
      - "scripts/exclude-keyword.txt"

  # 2. AI 服务
  - name: "AIs_merged"
    type: "other"
    output_prefix: "+."
    targets: ["mihomo"]
    sources:
      - "https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/category-ai-!cn.list"
      - "https://ruleset.skk.moe/List/non_ip/ai.conf"
      - "https://github.com/DustinWin/ruleset_geodata/raw/mihomo-ruleset/ai.list"
      - "https://raw.githubusercontent.com/ConnersHua/RuleGo/refs/heads/master/Surge/Ruleset/Extra/AI.list"

  # 3. FakeIP 过滤
  - name: "Fake_IP_Filter_merged"
    type: "fakeip"
    output_prefix: ""
    targets: ["mihomo"]
    sources:
      - "https://raw.githubusercontent.com/vernesong/OpenClash/refs/heads/master/luci-app-openclash/root/etc/openclash/custom/openclash_custom_fake_filter.list"
      - "https://raw.githubusercontent.com/juewuy/ShellCrash/dev/public/fake_ip_filter.list"
      - "https://raw.githubusercontent.com/DustinWin/ruleset_geodata/refs/heads/mihomo-ruleset/fakeip-filter.list"
      - "https://raw.githubusercontent.com/wuiiled/Wuiiled_Setup/refs/heads/master/scripts/fake-ip-addon.txt"
      - "https://ruleset.skk.moe/Internal/clash_fake_ip_filter.yaml"

  # 4. 拒绝并丢弃
  - name: "Reject_Drop_merged"
    type: "other"
    output_prefix: ""
    targets: ["mihomo"]
    sources:
      - "https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt"
      - "https://raw.githubusercontent.com/wuiiled/Wuiiled_Setup/master/rules/Custom_Reject-drop.txt"
    allowlists:
      - "https://raw.githubusercontent.com/Cats-Team/AdRules/refs/heads/script/script/allowlist.txt"
    local_allowlists:
      - "scripts/exclude-keyword.txt"

  # 5. 国内域名
  - name: "CN_merged"
    type: "other"
    output_prefix: ""
    targets: ["mihomo"]
    sources:
      - "https://static-file-global.353355.xyz/rules/cn-additional-list.txt"
      - "https://ruleset.skk.moe/Clash/non_ip/domestic.txt"
